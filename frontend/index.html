<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus The AI Assistant</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #42e695, #3bb2b8);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            animation: gradientAnimation 10s infinite alternate;
        }

        @keyframes gradientAnimation {
            0% {
                background-position: 0% 50%;
            }
            100% {
                background-position: 100% 50%;
            }
        }

        .container {
            text-align: center;
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 2rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .button-container {
            margin-bottom: 2rem;
            animation: slideIn 1s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        button {
            font-size: 2rem;
            margin: 0 1rem;
            padding: 1rem 2rem;
            border: none;
            background-color: #007bff;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        #response-text {
            margin-top: 20px;
            font-size: 1.5rem;
            color: #fff;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Nexus The AI Assistant</h1>
    <div class="button-container">
        <button id="mic-btn" onclick="startRecording()">üéôÔ∏è Start Recording</button>
        <button id="play-btn" onclick="playResponse()">‚ñ∂Ô∏è Play Response</button>
    </div>
    <audio id="response-audio" style="display: none;"></audio>
    <div id="response-text"></div>
</div>

<script>
    async function startRecording() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            const audioContext = new AudioContext();
            const mediaStreamSource = audioContext.createMediaStreamSource(stream);
            const recorder = new MediaRecorder(mediaStreamSource);
            let chunks = [];

            recorder.ondataavailable = (e) => {
                chunks.push(e.data);
            };

            recorder.onstop = async () => {
                const audioBlob = new Blob(chunks, { type: 'audio/wav' });
                const audioUrl = URL.createObjectURL(audioBlob);
                const formData = new FormData();
                formData.append('audio_data', audioBlob, 'audio.wav');

                const response = await fetch('/analyze_audio', {
                    method: 'POST',
                    body: formData
                });

                const responseData = await response.blob();
                const responseUrl = URL.createObjectURL(responseData);
                const audioElement = document.getElementById('response-audio');
                audioElement.src = responseUrl;
                audioElement.play();

                // Display response text on the webpage
                const responseText = await response.text();
                document.getElementById('response-text').innerText = responseText;
            };

            recorder.start();
            setTimeout(() => recorder.stop(), 5000); // Record for 5 seconds
        } catch (error) {
            console.error('Error accessing microphone:', error);
        }
    }

    function playResponse() {
        const audioElement = document.getElementById('response-audio');
        audioElement.play();
    }
</script>

</body>
</html>
